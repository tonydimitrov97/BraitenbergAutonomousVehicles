<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Iteration 3 Documentation: Iteration 3 Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Iteration 3 Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Iteration 3 Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Technical Introduction</h1>
<p>This program creates a robot simulation, in which an autonomous robot moves around a 2D world. The robot moves based upon it’s behavior and hunger level. This software is written in C++, making the use of the OpenGL graphics library, as well as the nanogui library. Compilation requires the installation of the MinGfx library. This library creates the 2D graphics window that the arena lives in and animates both the entities and the environment using a continuous control loop.</p>
<h1><a class="anchor" id="mvc_sec"></a>
Model-View-Controller</h1>
<p>This software follows the model-view- controller(MVC) design pattern, which corresponds to three primary classes where the bulk of the code is held in: <a class="el" href="class_arena.html" title="The main class for the simulation of a 2D world with many entities running around. ">Arena</a>, <a class="el" href="class_graphics_arena_viewer.html" title="An application that uses the MinGfx library to open up a window that includes a few buttons for contr...">GraphicsArenaViewer</a>, and <a class="el" href="class_controller.html" title="Controller that mediates Arena and GraphicsArenaViewer communication. ">Controller</a>.</p>
<p>The Model in this implementation is the <a class="el" href="class_arena.html" title="The main class for the simulation of a 2D world with many entities running around. ">Arena</a> class. The <a class="el" href="class_arena.html" title="The main class for the simulation of a 2D world with many entities running around. ">Arena</a> manages all of the entities and their actions. For instance, methods that perform tasks such as removing and adding entities to the simulation are defined here, methods for controlling the movement are defined to some degree here, and there is a substantial method, UpdateEntitiesTimestep, which calculates the proper positioning and action after each time step. A time step in this context is an iteration through the game loop.</p>
<p>The <a class="el" href="class_graphics_arena_viewer.html" title="An application that uses the MinGfx library to open up a window that includes a few buttons for contr...">GraphicsArenaViewer</a> handles both user input and graphical display of the simulation. This is the part of the project which relies on the MinGfx library mentioned earlier as it inherits from the MinGfx class GraphicsApp. The <a class="el" href="class_graphics_arena_viewer.html" title="An application that uses the MinGfx library to open up a window that includes a few buttons for contr...">GraphicsArenaViewer</a> controls the timing of the simulation and the graphics display by using a loop that calls UpdateSimulation and DrawUsingNanoVG at each iteration.</p>
<p>The <a class="el" href="class_controller.html" title="Controller that mediates Arena and GraphicsArenaViewer communication. ">Controller</a> class is the last of the three classes that is influenced by the MVC design pattern. This class acts as a connection between the <a class="el" href="class_graphics_arena_viewer.html" title="An application that uses the MinGfx library to open up a window that includes a few buttons for contr...">GraphicsArenaViewer</a> and the <a class="el" href="class_arena.html" title="The main class for the simulation of a 2D world with many entities running around. ">Arena</a>. For example, if a user were to add a robot to the simulation they would alter the slider in the <a class="el" href="class_graphics_arena_viewer.html" title="An application that uses the MinGfx library to open up a window that includes a few buttons for contr...">GraphicsArenaViewer</a> which would in turn call a method of the controller class, which then would decide what method is best to call in the <a class="el" href="class_arena.html" title="The main class for the simulation of a 2D world with many entities running around. ">Arena</a> class.</p>
<h1><a class="anchor" id="entities_sec"></a>
Entities</h1>
<p>As mentioned previously there are multiple entities that exist within the simulation. The three entities are as follows: <a class="el" href="class_robot.html" title="Class representing a robot within the arena. ">Robot</a>, <a class="el" href="class_light.html" title="Class representing a mobile light within the Arena. ">Light</a>, and <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a>.</p>
<p><a class="el" href="class_robot.html" title="Class representing a robot within the arena. ">Robot</a> is the main entity in the simulation. The robot autonomously moves based on two attributes: hunger level and behavior. If there is food in the arena that robot has a hunger level. The hunger level, which is based on a timer, is defined to be decremented within the robot’s TimestepUpdate method. This implementation of the software uses the dt or delta time to control the hunger timer and not the computer clock. Due to this implementation runtime fluctuates slightly between machines however the total time from no hunger to starvation is ~2 minutes and 30 seconds. The robot’s <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a> <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a> which inherits from a parent <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a> class guides the robot towards the location of a <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a> entity. Based upon the hunger stage the robot is either only influenced by light, influenced by light and food, or only influenced by food. The other way the robot moves is in response to the light entities. The robot can have one of two behaviors: <a class="el" href="class_fear.html" title="The class for the robot fear behavior. ">Fear</a> or <a class="el" href="class_explore.html" title="The class for the robot explore behavior. ">Explore</a>. The <a class="el" href="class_fear.html" title="The class for the robot fear behavior. ">Fear</a> behavior makes the robot moves slow away from the light and move away quickly when it comes towards the light and the <a class="el" href="class_explore.html" title="The class for the robot explore behavior. ">Explore</a> behavior moves quickly when not near the light and moves away slowly when near the light in an effort to avoid them. The robot controls the response to lights by using its <a class="el" href="class_light.html" title="Class representing a mobile light within the Arena. ">Light</a> <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a> which much like the <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a> <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a> inherits from the same parent <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a> class.</p>
<p>The Robot’s movement is handled using a combination of differential drive and Sensors. Differential drive is the concept that the robot has two wheels and it turns when one wheel has a higher velocity than another. Both Sensors act similarly just with different stimuli. The robot has two sensors placed 40 degrees away from its main focal point. With each time step, a Notify method notifying the sensor of its respective entities is called. This implementation is based on the Observer Pattern. The Notify method (which is a virtual method of the <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a> class is overwritten within in both the <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a> and the <a class="el" href="class_light.html" title="Class representing a mobile light within the Arena. ">Light</a> <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a> classes) calculates sensor readings based upon the robot’s distance from other entities. The function used to do this is as follows: reading = 1200/(distance^1.08). This reading is then passed into an UpdateVelocity method which is part of the <a class="el" href="class_motion_handler_robot.html" title="Class managing a Robot&#39;s speed and heading angle foodd on collisions and user inputs. ">MotionHandlerRobot</a> class. In the <a class="el" href="class_motion_handler_robot.html" title="Class managing a Robot&#39;s speed and heading angle foodd on collisions and user inputs. ">MotionHandlerRobot</a> the Strategy design pattern is used to control the type of robot (fear or explore). This done by having a <a class="el" href="class_braitenberg.html" title="This parent class for all of the possible robot behaviors. ">Braitenberg</a> parent class as an attribute and defining the behavior at runtime. The UpdateVelocity method is defined according to the type of the robot. The definitions for these can be seen in their respective definition is <a class="el" href="fear_8cc.html">fear.cc</a> and <a class="el" href="explore_8cc.html">explore.cc</a>. Please note that there is an aggressive behavior for the food as well that is only used when the robot is starving.</p>
<p>The <a class="el" href="class_light.html" title="Class representing a mobile light within the Arena. ">Light</a> is the second entity. Lights move in a static fashion. They always move straight until they collide with a wall, at that point they move in an arc back in order to avoid never ending collisions. The Lights collide with walls and other Lights which is shown in the Arena’s HandleEntityCollision method. The amount of Lights is handled by the sliders in the <a class="el" href="class_graphics_arena_viewer.html" title="An application that uses the MinGfx library to open up a window that includes a few buttons for contr...">GraphicsArenaViewer</a>.</p>
<p>The <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a> is the last entity in the simulation. The <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a> has no movement at all and is placed randomly within the arena. The robots consume food to reset their hunger level. There is a slider for food as well. If the slider is set to 0 the robot hunger will be shut off using a Boolean attribute of the robot class called has_hunger_. This attribute will be set to false and the hunger time will not be a factor if the arena has no food.</p>
<h1><a class="anchor" id="general_sec"></a>
General Introduction</h1>
<p>This robot simulations is used to exhibit the reaction of different types of robots to lights. The robots have a behavior, either fear or explore, and a hunger level. Robots also react to food in different ways depending on the hunger level.</p>
<h1><a class="anchor" id="gui_sec"></a>
Graphical User Interface (GUI)</h1>
<p>The simulation is laid out in a simple fashion. In the far right of the screen there is a toggle menu. At the top of the menu there is a Play/Pause button. This button starts and stops the simulation much like a pause button on a video game. This is set to a default value of paused so Play must be pushed each time a new simulation is made. The button beneath it is a New Game button which resets the simulation by resetting all hunger levels and entity positions. Beneath that is an assortment of sliders to control various attributes of the simulation. In order they are: Number of <a class="el" href="class_fear.html" title="The class for the robot fear behavior. ">Fear</a> Robots, Number of <a class="el" href="class_explore.html" title="The class for the robot explore behavior. ">Explore</a> Robots, Number of Lights, Number of <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a>, and Sensitivity of the <a class="el" href="class_sensor.html" title="Parent class for both of the sensors a robot can have. ">Sensor</a>. All of these are self-explanatory as far as their actions, aside from the sensitivity slider. The lower the sensitivity the less the robots will react to other stimuli. If this is set to zero the robots will move in their default behavior (<a class="el" href="class_fear.html" title="The class for the robot fear behavior. ">Fear</a> robots will freeze, <a class="el" href="class_explore.html" title="The class for the robot explore behavior. ">Explore</a> robots will move at maximum velocity) [Please see the next section for descriptions of these behaviors].</p>
<p>The arena itself is held within the white outline seen on the screen. These white outlines act as the wall or boundaries of the simulation and none of the entities can spawn or move outside of them. The three entities - <a class="el" href="class_robot.html" title="Class representing a robot within the arena. ">Robot</a>, <a class="el" href="class_food.html" title="Class representing a immobile food within the Arena. ">Food</a>, <a class="el" href="class_light.html" title="Class representing a mobile light within the Arena. ">Light</a> – are colored in blue, red, and white respectively. The two dots seen on the robot are its sensor, which will be explained in further detail in the next section. The robots and lights are randomly sized within a certain range while the food is always the same size.</p>
<h1><a class="anchor" id="how_it_works_sec"></a>
How the Simulation Works</h1>
<p>The robots move autonomously based upon the behavior they exhibit and their hunger level. There are three stages of hunger: full (first 30 seconds), hungry (between 30 seconds and 2 minutes), and starving (between 2 minutes and 2 minutes and 30 seconds). Depending on which stage the robot is in it will react in different ways. If it is not hungry it will only react to the lights, if it is hungry it will react to lights and go towards food and if it is starving it will move only towards food and not to lights. If the robot goes 2 minutes and 30 seconds without consuming food the simulation will end and a “YOU LOST” message will appear in the middle of the GUI. At that point the New Game button can be pressed to restart.</p>
<p>The other way the robot moves is through its behavior. Robots can have two behaviors, <a class="el" href="class_fear.html" title="The class for the robot fear behavior. ">Fear</a> or <a class="el" href="class_explore.html" title="The class for the robot explore behavior. ">Explore</a>. The <a class="el" href="class_fear.html" title="The class for the robot fear behavior. ">Fear</a> behavior moves slowly away from lights and moves quickly away when coming close to lights. The <a class="el" href="class_explore.html" title="The class for the robot explore behavior. ">Explore</a> robot moves quickly in a straight line when away from lights and slowly turns away when close to lights.</p>
<p>Collisions are handled in multiple ways depending on the entity. Robots collide with other robots and the wall. Lights collide with other lights and the wall. None of the entities collide with food (food obviously does not handle any collisions as it is immobile). Every entity reverses in an arc when it registers a proper collision. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
